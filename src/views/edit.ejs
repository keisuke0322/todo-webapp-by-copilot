<%- include('partials/header') %>

<h2>ToDo編集</h2>

<% if (typeof error !== 'undefined' && error) { %>
    <div class="alert alert-error"><%= error %></div>
<% } %>

<form action="/<%= todo.id %>" method="POST" class="todo-form">
    <div class="form-group">
        <label for="title">タイトル <span class="required">*</span></label>
        <input type="text" id="title" name="title" value="<%= todo.title %>" required>
    </div>

    <div class="form-group">
        <label for="content">内容</label>
        <textarea id="content" name="content" rows="4"><%= todo.content || '' %></textarea>
    </div>

    <div class="form-group">
        <label for="due_date">期限</label>
        <input type="date" id="due_date" name="due_date" value="<%= todo.due_date || '' %>">
    </div>

    <div class="form-group">
        <label for="priority">優先度</label>
        <select id="priority" name="priority">
            <option value="1" <%= todo.priority === 1 ? 'selected' : '' %>>高</option>
            <option value="2" <%= todo.priority === 2 ? 'selected' : '' %>>中</option>
            <option value="3" <%= todo.priority === 3 ? 'selected' : '' %>>低</option>
        </select>
    </div>

    <div class="form-actions">
        <button type="submit" class="btn btn-primary">更新</button>
        <a href="/" class="btn btn-cancel">キャンセル</a>
    </div>
</form>

<%- include('partials/footer') %>
